<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link href="style.css" rel="stylesheet" type="text/css">
        <script src="/socket.io/socket.io.js"></script>
        <script src="./dropzone-5.7.0/dist/dropzone.js"></script>
        <script src="jquery-3.5.1.min.js"></script>
        <!--Insert google analytics here-->
    </head>
    <body onLoad="fixStuff()">
    	<nav class="navBar"></nav>
    	<div style="width: 100%; height: 120vh;">
	    	<h1 class='title'>Free music fingerprinting, right here on the web.</h1>
	    	<div id="mainNavs">
	    	<div onclick='location.href = "#upload"' style="grid-area: a;" id="toUpload" class='mainNavigation'><div><h2>Upload</h2></div></div>
	    	<div style="grid-area: b;" id="toCompare" class='mainNavigation'><div><h2>Compare</h2></div></div>
	    	</div>
    	</div>
    	<div id="upload" class='mainSection'>
    		<h2>Upload a file to the database</h2>
    		<form name="uploadFile" action="/upload/" onsubmit="return VerifyForm();" method="post" id="uploadDropzone" enctype="multipart/form-data">
    			<p id='error'></p>
    			<label for="file">File: </label>
    			<input type='file' id='file' name='file' required>
    			<label for="audio_name">Track Name: </label>
    			<input type="text" id="audio_name" name="audio_name" placeholder="Name of track" required autocomplete="off"></input><br>
    			<!--<label for="artist_name">Artist Name:</label>
    			<input type="text" id="artist_name" name="artist_name" placeholder="Name of artist" required autocomplete="off"></input><br>-->
    		</form>
    		<script>
    			const socket = io('ws://localhost:3200');
    			function VerifyForm()
    			{
    				console.log();
    				if(!document.uploadFile.file.value.toString().endsWith(".wav"))
    				{
    					$("#error").html("Please upload a .WAV file. ")
    					return false;
    				}
    				if(document.uploadFile.audio_name.value.length < 3)
    				{
    					$("#error").html("Name too short");
    					return false;
    				}
    				return true;
    			}
    			function fixStuff()
    			{
					document.getElementById("uploadDropzone").innerHTML += '<input class="submitButton" type="submit" value="OK">'
    			}

    		</script>
    	</div>

    	<script>

    	</script>
	</body>
</html>